###############################################################################
# Base Configuration; this provides sane defaults for commonly used parts.
# -----------------------------------------------------------------------------
#
# This configuration was generated by Chef!
#
# Buildout instructions in this file are usually only changed by experienced
# developers.
#
# Beyond here there be dragons!

[buildout]

###############################################################################
# Configurations to extend
# -----------------------------------------------------------------------------
extends =
    base.cfg
    <%= @version %>/versions.cfg


###############################################################################
# Download links for packages
# -----------------------------------------------------------------------------
# If you change your Plone version, you'll also need to update the repository
# link below.
find-links +=
    http://dist.plone.org/release/<%= @version %>


###############################################################################
# Parts Specification
# -------------------
# Specifies the components that should be included in the buildout. All the
# basics are in the base.cfg extension; you may add your own if you need them
# at the end of this file.
parts =
    client
    zopepy
    unifiedinstaller
    precompiler
    setpermissions


###############################################################################
# Eggs
# -----------------------------------------------------------------------------
# Add an indented line to the eggs section for any Python eggs or packages you
# wish to include.
eggs =
    Plone
    Pillow
    <% @eggs.each do |egg| -%>
    <%= egg %>
    <% end -%>


###############################################################################
# ZCML Slugs
# -----------------------------------------------------------------------------
# Some eggs need ZCML slugs to tell Zope to use them. This is increasingly
# rare.
zcml =
    <% @zcml.each do |entry| -%>
    <%= entry %>
    <% end -%>


###############################################################################
# ZEO-Client
# -----------------------------------------------------------------------------
# Use this section to install and configure a ZEO client instance.
# For options see http://pypi.python.org/pypi/plone.recipe.zope2instance
[client]
<= client_base
recipe = plone.recipe.zope2instance
<% @zeo_servers[0..0].each do |zeo_server| -%>
zeo-address = <%= zeo_server[:plone][:zeo][:ip] %>:<%= zeo_server[:plone][:zeo][:port] %>
<% end -%>
http-address = <%= @client_ip %>:<%= @client_port %>


###############################################################################
# Versions Specification
# -----------------------------------------------------------------------------
# Version information supplied here will "pin" Python packages to a particular
# version number, even when you use the "newest" flag running buildout.
# Specifying versions for all packages is a good idea and can prevent
# accidental changes when you add new packages to your buildout.
# Note that versions specified here will override those specified earlier
# in the configuration, including those from the Plone and Zope version
# config files.
[versions]
<% @versions.each do |version| -%>
<%= version %>
<% end -%>
